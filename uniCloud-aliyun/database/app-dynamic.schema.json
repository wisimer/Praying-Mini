{
  "bsonType": "object",
  "required": [
    "user_id"
  ],
  "permission": {
    "read": true,
    "create": "auth.uid != null",
    "update": "doc.user_id == auth.uid",
    "delete": "doc.user_id == auth.uid"
  },
  "properties": {
    "_id": {
      "description": "ID，系统自动生成"
    },
    "user_id": {
      "bsonType": "string",
      "description": "作者ID",
      "foreignKey": "uni-id-users._id",
      "defaultValue": {
        "$env": "uid"
      }
    },
    "category_id": {
      "bsonType": "string",
      "title": "分类",
      "description": "分类 id"
    },
    "content": {
      "bsonType": "string",
      "title": "文章内容",
      "description": "文章内容",
      "label": "文章内容",
      "trim": "right"
    },
    "article_status": {
      "bsonType": "int",
      "title": "文章状态",
      "description": "文章状态：0 审核中 1 已发布 2 审核驳回",
      "defaultValue": 0,
      "enum": [
        {
          "value": 0,
          "text": "审核中"
        },
        {
          "value": 1,
          "text": "已发布"
        },
        {
          "value": 2,
          "text": "审核驳回"
        }
      ]
    },
    "view_count": {
      "bsonType": "int",
      "title": "阅读数量",
      "description": "阅读数量",
      "defaultValue": 3
    },
    "like_count": {
      "bsonType": "int",
      "description": "点赞数",
      "defaultValue": 0
    },
    "comment_status": {
      "bsonType": "int",
      "title": "开放评论",
      "description": "评论状态：0 关闭  1 开放",
      "enum": [
        {
          "value": 0,
          "text": "关闭"
        },
        {
          "value": 1,
          "text": "开放"
        }
      ]
    },
    "comment_count": {
      "bsonType": "int",
      "description": "评论数量",
      "defaultValue": 0
    },
    "topic_id": {
      "bsonType": "string",
      "description": "话题",
      "foreignKey": "app-topic._id"
    },
    "sort": {
      "bsonType": "int",
      "description": "动态分类 1:普通动态 2:问答 3:种草 6:同城送养 7:失宠找回"
    },
    "imgs": {
      "bsonType": "string",
      "description": "缩略图地址"
    },
    "publish_date": {
      "bsonType": "timestamp",
      "title": "发表时间",
      "description": "发表时间",
      "defaultValue": {
        "$env": "now"
      }
    },
    "last_modify_date": {
      "bsonType": "timestamp",
      "title": "最后修改时间",
      "description": "最后修改时间",
      "defaultValue": {
        "$env": "now"
      }
    },
    "ip": {
      "bsonType": "string",
      "description": "ip所在地",
      "forceDefaultValue": {
        "$env": "clientIP"
      }
    },
    "ai_message": {
      "bsonType": "string",
      "title": "AI寄语"
    },
    "fullfill_ai_message": {
      "bsonType": "string",
      "title": "还愿AI寄语"
    },
    "fullfilled": {
      "bsonType": "boolean",
      "title": "是否还愿",
      "defaultValue": false
    },
    "fullfill_content": {
      "bsonType": "string",
      "title": "还愿信息",
      "defaultValue": "已还愿"
    },
    "fullfill_date": {
      "bsonType": "timestamp",
      "title": "还愿时间",
      "description": "还愿时间",
      "defaultValue": {
        "$env": "now"
      }
    },
    "content_style": {
      "bsonType": "object",
      "title": "样式附加信息",
      "description": "样式附加信息",
      "properties": {
        "bgType": {
          "bsonType": "string",
          "title": "背景类型"
        },
        "bgValue": {
          "bsonType": "string",
          "title": "背景值"
        },
        "fontSize": {
          "bsonType": "number",
          "title": "字体大小"
        },
        "color": {
          "bsonType": "string",
          "title": "字体颜色"
        },
        "fontWeight": {
          "bsonType": "string",
          "title": "字体权重"
        }
      }
    }
  }
}